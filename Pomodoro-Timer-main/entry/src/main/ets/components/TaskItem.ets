import { Task } from '../models/TaskModel';

/**
 * ä»»åŠ¡é¡¹ç»„ä»¶
 * å°è£…ä»»åŠ¡åˆ—è¡¨é¡¹çš„æ˜¾ç¤ºå’Œäº¤äº’
 */
@Component
export struct TaskItem {
  @Prop task: Task;
  @Prop isActive: boolean = false;
  @Prop primaryColor: string = '#FF6B6B';
  @Prop cardBg: string = '#FFFFFF';
  @Prop textPrimary: string = '#2D3436';
  @Prop textSecondary: string = '#636E72';
  
  onTaskClick?: () => void;
  onDeleteClick?: () => void;

  build() {
    Row() {
      Column() {
        Row() {
          Text(this.task.title)
            .fontSize(16)
            .fontWeight(FontWeight.Medium)
            .fontColor(this.textPrimary)
            .decoration({
              type: this.task.completed ? TextDecorationType.LineThrough : TextDecorationType.None,
              color: this.textSecondary
            })

          Text(`ä»Šæ—¥ï¼š${this.task.todayPomodoros} ðŸ…`)
            .fontSize(14)
            .fontColor(this.textSecondary)
            .margin({ left: 20 })

          Text(`æ€»è®¡ï¼š${this.task.pomodoros} ðŸ…`)
            .fontSize(14)
            .fontColor(this.textSecondary)
            .margin({ left: 16 })
        }
        .margin({ top: 4 })
      }

      Blank()

      if (this.isActive) {
        Text('è¿›è¡Œä¸­')
          .fontColor(this.primaryColor)
          .fontSize(14)
          .fontWeight(FontWeight.Medium)
      }
    }
    .width('100%')
    .padding(16)
    .backgroundColor(this.isActive ? '#FFF5F5' : this.cardBg)
    .borderRadius(16)
    .shadow({
      radius: 8,
      color: '#00000010',
      offsetY: 2
    })
    .onClick(() => {
      if (this.onTaskClick) {
        this.onTaskClick();
      }
    })
  }
}

