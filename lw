湖南农业大学课程论文

学院：计算机科学与技术学院    班级：软件工程2021级
姓名：张三    学号：20210001
课程论文题目：基于HarmonyOS的番茄计时器应用开发
课程名称：移动应用开发
评阅成绩：
评阅意见：

成绩评定教师签名：
日期：    年    月    日

# 基于HarmonyOS的番茄计时器应用开发

学生：张三
（计算机科学与技术学院软件工程班级，学号20210001）

## 摘要

本项目基于HarmonyOS平台开发了一款番茄计时器应用，旨在帮助用户提高时间管理效率和工作专注度。应用采用了经典的番茄工作法原理，通过25分钟工作与5分钟休息的交替循环，结合任务管理和数据统计功能，为用户提供全方位的时间管理解决方案。系统实现了计时器控制、任务管理、数据统计分析等核心功能，并通过本地数据存储确保用户数据的持久性。测试结果表明，应用界面友好、交互流畅，能够有效帮助用户提高工作效率。

**关键词**：HarmonyOS；番茄工作法；时间管理；移动应用开发

## 1 前言

### 1.1 项目背景

在当今信息爆炸的时代，人们面临着越来越多的信息干扰和时间管理挑战。注意力分散、工作效率低下成为许多人的普遍问题。番茄工作法（Pomodoro Technique）作为一种简单有效的时间管理方法，自上世纪80年代被提出以来，受到了广泛的关注和应用。该方法通过将工作时间分割成25分钟的专注工作段（番茄钟），配以短暂的休息时间，帮助用户保持高度专注并避免疲劳。

随着智能手机的普及，移动应用成为实现番茄工作法的理想平台。HarmonyOS作为华为推出的分布式操作系统，提供了丰富的UI组件和开发工具，为开发者提供了良好的应用开发环境。本项目旨在基于HarmonyOS平台，开发一款功能完善、用户友好的番茄计时器应用，帮助用户更好地管理时间、提高工作效率。

### 1.2 研究现状

目前，市场上已有多款基于番茄工作法的应用程序，如Forest、Focus To-Do、番茄ToDo等。这些应用通常具有计时器、任务管理、数据统计等功能，但大多存在界面复杂、功能冗余或用户体验不佳等问题。

在HarmonyOS应用开发方面，近年来取得了显著进展。2021年，华为正式发布HarmonyOS 2.0，为开发者提供了全新的应用开发框架。Chen等（2021）提出了基于HarmonyOS的分布式应用开发模式，为跨设备应用开发提供了新思路。Zhang等（2022）研究了HarmonyOS UI组件的使用方法和最佳实践，为应用界面设计提供了参考。Li等（2023）探讨了HarmonyOS数据存储方案的实现，为本项目的数据持久化提供了技术支持。

然而，专门针对HarmonyOS平台的番茄计时器应用研究相对较少。本项目旨在填补这一空白，开发一款符合HarmonyOS设计规范、功能丰富且易用的番茄计时器应用。

## 2 需求分析

### 2.1 用户需求分析

通过对目标用户群体的调研和分析，我们确定了以下主要用户需求：

1. **计时器功能**：提供25分钟工作时间和5分钟休息时间的计时器，支持开始、暂停、重置等操作
2. **任务管理**：用户可以创建、编辑、删除任务，并将番茄钟与特定任务关联
3. **数据统计**：记录用户完成的番茄钟数量、专注时间和任务完成情况，提供可视化的数据统计
4. **个性化设置**：允许用户自定义工作时间、休息时间等参数
5. **界面简洁直观**：提供友好的用户界面，操作简单明了

### 2.2 用例分析

基于用户需求，我们设计了以下主要用例：

1. **开始番茄钟**：用户点击开始按钮启动25分钟的专注工作时间
2. **暂停番茄钟**：用户可以随时暂停计时器，并在需要时恢复
3. **完成番茄钟**：当计时结束时，系统记录完成的番茄钟，并自动进入休息时间
4. **创建任务**：用户可以添加新的任务到任务列表中
5. **关联任务**：用户可以选择一个任务，将当前番茄钟与该任务关联
6. **查看统计**：用户可以查看历史统计数据，包括总番茄数、总专注时间和任务完成情况
7. **修改设置**：用户可以自定义工作时间、休息时间等参数

## 3 系统概要设计

### 3.1 系统功能结构设计

基于需求分析，本项目采用模块化设计方法构建番茄计时器应用系统。系统在整体架构上围绕用户时间管理的核心需求，将功能划分为相互协作的有机整体，既保证各模块职责单一，又确保模块间数据流通顺畅。

首先，计时器模块作为整个应用的核心组件，负责管理工作与休息时间的计时流程。它实现了标准的番茄工作法计时机制，能够精确控制25分钟工作时段和5分钟休息时段的交替运行，并提供灵活的开始、暂停和重置功能。当计时到达设定时间时，系统会通过视觉和声音反馈提醒用户，帮助用户建立规律的工作节奏。

其次，任务管理模块为用户提供了任务的全生命周期管理功能。在这个模块中，用户可以根据自身工作学习需要创建各类任务，设置任务优先级和截止时间，并通过编辑和删除操作随时调整任务信息。更重要的是，该模块支持将具体的番茄钟计时与特定任务关联起来，使用户能够针对不同任务分配专注时间，清晰记录每项任务所消耗的番茄钟数量，从而实现更精准的时间投入评估。

第三，数据统计模块承担着用户使用数据的记录与分析职责。系统会自动收集用户完成的番茄钟数量、累计专注时长等基础数据，并进一步统计每日、每周和每月的使用趋势。通过直观的数据可视化展示，用户可以清晰了解自己的时间使用模式和工作效率变化，为优化个人时间管理策略提供数据支撑。

最后，设置模块提供了丰富的个性化配置选项，满足不同用户的使用偏好。用户可以根据个人习惯自定义工作时间和休息时间的长度，调整提醒方式和音量大小，还可以切换应用主题和选择界面语言。这些个性化设置极大提升了用户体验，使应用能够更好地适应不同用户的使用场景和需求。

这四个核心模块通过清晰的数据交互机制连接成一个完整的系统。计时器模块的运行状态会实时传递给任务管理和数据统计模块，而设置模块的配置信息则直接影响计时器的工作参数和用户界面的呈现效果。通过这种模块化的设计方式，系统不仅功能完整，还具有良好的可维护性和可扩展性。

## 3.2 技术栈与工具选择

本项目在开发过程中综合考虑了技术成熟度、开发效率和用户体验等因素，精心选择了以下技术栈和工具：

首先，在开发语言方面，项目采用TypeScript结合ArkTS进行开发。TypeScript作为JavaScript的超集，提供了静态类型检查功能，有效提升了代码的健壮性和可维护性；而ArkTS作为HarmonyOS专用开发语言，充分利用了HarmonyOS平台的特性，为应用提供了更好的性能支持。开发框架选用了HarmonyOS SDK，它提供了完整的API支持和开发工具链，为应用开发提供了坚实的基础。

在UI实现上，项目使用ArkUI作为UI框架。ArkUI是HarmonyOS原生的UI框架，提供了丰富的组件库和声明式的UI开发方式，使界面开发更加直观高效。对于数据存储需求，项目采用Preferences API进行本地键值存储，该API操作简便，适合存储应用配置和用户偏好设置等轻量级数据。

在开发工具选择上，项目使用DevEco Studio作为集成开发环境。DevEco Studio专为HarmonyOS应用开发设计，提供了代码编辑、调试、构建等一站式开发功能，显著提升了开发效率。

此外，为了进一步提升开发效率和用户体验，项目还集成了多个成熟的第三方依赖。在数据可视化方面，选用了功能强大的ECharts图表库，该库提供了丰富的图表类型和灵活的配置选项，能够满足项目中各类数据统计和展示需求，包括习惯完成情况的柱状图、南丁格尔玫瑰图等，使数据呈现更加直观生动。

在网络请求处理方面，项目采用@kit.NetworkKit中的http模块进行RESTful API调用。该模块提供了Promise风格的异步请求方法，支持请求拦截、响应拦截等功能，使前后端数据交互更加可靠和高效。对于用户交互反馈，项目引入了@ohos.promptAction模块，用于显示toast提示和对话框，提升了用户操作的反馈体验。

在页面导航方面，项目使用@ohos.router模块处理页面跳转和参数传递。该模块支持声明式和命令式的导航方式，使页面间的切换更加流畅自然。同时，项目还集成了@kit.ArkTS工具库，该库提供了一系列实用的工具函数和装饰器，如@Observed用于状态管理，显著提升了代码的可维护性和开发效率。

通过合理选择和整合这些技术栈与工具，项目在保证功能完整性的同时，有效提升了开发效率和用户体验。

## 4 系统详细设计

### 4.1 数据接口设计

在番茄计时器应用中，数据接口主要涉及本地数据存储和管理，而非远程API调用。基于项目的实际功能需求，我们设计了以下关键数据接口：

#### 4.1.1 任务管理接口

任务管理接口主要负责番茄钟任务的增删改查操作，具体包括：

| 接口功能 | 操作方式 | 数据格式 | 说明 |
|---------|---------|---------|------|
| 创建任务 | 本地函数调用 | 对象类型 | 创建新的番茄钟任务，包含任务名称、描述、优先级等信息 |
| 查询任务 | 本地函数调用 | 数组类型 | 获取任务列表，支持按状态、优先级等条件筛选 |
| 更新任务 | 本地函数调用 | 对象类型 | 更新现有任务的信息，如完成状态、关联番茄钟数量等 |
| 删除任务 | 本地函数调用 | 布尔类型 | 根据任务ID删除指定任务 |

#### 4.1.2 首页数据接口设计

由于番茄计时器应用主要是本地运行的应用程序，不需要与远程服务器进行HTTP请求交互。本应用的数据交互主要通过本地函数调用和Preferences API实现。以下是首页（主界面）相关的数据接口设计：

表 1 首页数据请求接口详情表
Table 1 Table of Homepage Data Request Interface Details

| 接口名称 | 操作类型 | 参数说明 | 返回值类型 | 功能描述 |
|---------|---------|---------|-----------|----------|
| getTasks | 本地函数 | 无 | Task[] | 获取所有任务列表，用于首页任务选择 |
| getRecentPomodoros | 本地函数 | days: number | Pomodoro[] | 获取最近几天的番茄钟记录，显示在首页统计区域 |
| getSettings | 本地函数 | 无 | Settings | 获取用户设置，包括工作时长、休息时长等配置 |

表 2 首页数据更新接口详情表
Table 2 Table of Homepage Data Update Interface Details

| 接口名称 | 操作类型 | 参数说明 | 返回值类型 | 功能描述 |
|---------|---------|---------|-----------|----------|
| startPomodoro | 本地函数 | taskId: string | Pomodoro | 开始新的番茄钟，可关联特定任务 |
| pausePomodoro | 本地函数 | pomodoroId: string | boolean | 暂停当前番茄钟 |
| completePomodoro | 本地函数 | pomodoroId: string | boolean | 完成当前番茄钟并记录 |
| updateTaskStatus | 本地函数 | taskId: string, status: TaskStatus | boolean | 更新任务状态，如标记为进行中或已完成

#### 4.1.3 用户设置接口

用户设置接口用于管理应用的配置参数和用户偏好：

| 接口功能 | 操作方式 | 数据格式 | 说明 |
|---------|---------|---------|------|
| 获取设置 | 本地函数调用 | 对象类型 | 获取当前应用的所有配置参数 |
| 更新设置 | 本地函数调用 | 对象类型 | 更新用户偏好设置，如工作时长、休息时长、提醒方式等 |
| 恢复默认设置 | 本地函数调用 | 布尔类型 | 将所有设置恢复到默认值 |

这些数据接口设计充分考虑了番茄计时器应用的本地运行特性，采用本地函数调用而非远程HTTP请求的方式实现数据交互，确保应用在离线环境下仍能正常工作。所有数据通过Preferences API进行持久化存储，保证用户数据的安全性和一致性。

## 4.2 统计页面详细设计

### 4.2.1 界面原型设计

统计页面展示用户的使用数据，包括最近7天的专注时长柱状图和页面底部展示详细的数据列表，包含每天的日期、完成的任务数、专注时间等信息。

图 4 统计页面原型设计图
Fig 4 Prototype Design of stats page

### 4.2.2 数据接口设计

#### 4.2.2.1 统计页面数据接口

请求 URL: /api/statistics/weekly-focus
Http 请求方式: GET
数据交互格式: JSON

请求参数：
| 参数名 | 必选 | 类型及范围 | 说明 |
|-------|------|-----------|------|
| days | False | number | 查询天数，默认7天 |

响应参数：
| 返回字段名 | 字段类型 | 字段说明 |
|----------|---------|----------|
| code | number | 状态码，0-成功，非0失败 |
| message | string | 响应信息 |
| data | Array | 专注时长数据数组 |
| data[].date | string | 日期，格式为YYYY-MM-DD |
| data[].focusMinutes | number | 专注时长（分钟） |
| data[].pomodoroCount | number | 完成的番茄钟数量 |

#### 4.2.2.2 详细统计数据接口

请求 URL: /api/statistics/detailed
Http 请求方式: GET
数据交互格式: JSON

请求参数：
| 参数名 | 必选 | 类型及范围 | 说明 |
|-------|------|-----------|------|
| startDate | False | string | 开始日期，格式为YYYY-MM-DD |
| endDate | False | string | 结束日期，格式为YYYY-MM-DD |

响应参数：
| 返回字段名 | 字段类型 | 字段说明 |
|----------|---------|----------|
| code | number | 状态码，0-成功，非0失败 |
| message | string | 响应信息 |
| data | Array | 详细统计数据数组 |
| data[].date | string | 日期，格式为YYYY-MM-DD |
| data[].completedTasks | number | 完成的任务数量 |
| data[].focusTime | number | 总专注时间（分钟） |
| data[].pomodoroCount | number | 完成的番茄钟数量 |
| data[].mostFocusedTask | string \| null | 专注时间最长的任务名称 |

#### 4.2.2.3 任务完成数据接口

请求 URL: /api/statistics/tasks
Http 请求方式: GET
数据交互格式: JSON

请求参数：
| 参数名 | 必选 | 类型及范围 | 说明 |
|-------|------|-----------|------|
| startDate | False | string | 开始日期，格式为YYYY-MM-DD |
| endDate | False | string | 结束日期，格式为YYYY-MM-DD |

响应参数：
| 返回字段名 | 字段类型 | 字段说明 |
|----------|---------|----------|
| code | number | 状态码，0-成功，非0失败 |
| message | string | 响应信息 |
| data | Array | 任务完成数据数组 |
| data[].taskId | string | 任务ID |
| data[].taskName | string | 任务名称 |
| data[].completedPomodoros | number | 完成的番茄钟数量 |
| data[].totalFocusMinutes | number | 总专注时长（分钟） |
| data[].completionDate | string | 完成日期，格式为YYYY-MM-DD |

#### 4.2.2.4 专注时间趋势接口

请求 URL: /api/statistics/trend
Http 请求方式: GET
数据交互格式: JSON

请求参数：
| 参数名 | 必选 | 类型及范围 | 说明 |
|-------|------|-----------|------|
| period | True | string | 时间维度，可选值：week/month/year |

响应参数：
| 返回字段名 | 字段类型 | 字段说明 |
|----------|---------|----------|
| code | number | 状态码，0-成功，非0失败 |
| message | string | 响应信息 |
| data | Array | 趋势数据数组 |
| data[].label | string | 时间标签（如日期、月份） |
| data[].value | number | 专注时长（分钟） |
| data[].pomodoroCount | number | 番茄钟数量 |

## 4.3 习惯管理页面详细设计

### 4.3.1 界面原型设计

习惯管理页面用于用户创建和管理日常习惯，包括查看习惯完成情况、添加新习惯、标记习惯完成状态等功能。

### 4.3.2 数据接口设计

请求 URL:/habits
Http 请求方式:get
数据交互格式:JSON
请求参数：如表 6 所示

表 6 习惯查询请求参数详情表
Table 6 Table of Habits Request Parameter Details

| 请求字段 | 必选 | 类型及范围 | 说明 |
|---------|------|-----------|------|
| date | True | string | 查询日期，格式为YYYY-MM-DD |
| userId | True | string | 用户ID |
| status | False | number | 习惯状态，0-未完成，1-已完成 |
| type | False | string | 习惯类型，可选值：daily/weekly/monthly |

响应字段说明：如表 7 所示

表 7 习惯查询响应参数详情表
Table 7 Table of Habits Response Parameter Details

| 返回字段名 | 字段类型 | 字段说明 |
|----------|---------|----------|
| code | number | 状态码，0-成功，非0-失败 |
| message | string | 响应信息 |
| data | Array | 习惯列表数据 |
| data[].id | string | 习惯ID |
| data[].name | string | 习惯名称 |
| data[].icon | string | 习惯图标 |
| data[].type | string | 习惯类型 |
| data[].startDate | string | 开始日期 |
| data[].endDate | string | 结束日期 |
| data[].status | number | 完成状态 |

---

请求 URL:/habits/add
Http 请求方式:post
数据交互格式:JSON
请求参数：如表 8 所示

表 8 添加习惯请求参数详情表
Table 8 Table of Add Habit Request Parameter Details

| 请求字段 | 必选 | 类型及范围 | 说明 |
|---------|------|-----------|------|
| name | True | string | 习惯名称 |
| userId | True | string | 用户ID |
| type | True | string | 习惯类型，可选值：daily/weekly/monthly |
| icon | False | string | 习惯图标 |
| startDate | True | string | 开始日期，格式为YYYY-MM-DD |
| endDate | False | string | 结束日期，格式为YYYY-MM-DD |
| reminderTime | False | string | 提醒时间，格式为HH:mm |

响应字段说明：如表 9 所示

表 9 添加习惯响应参数详情表
Table 9 Table of Add Habit Response Parameter Details

| 返回字段名 | 字段类型 | 字段说明 |
|----------|---------|----------|
| code | number | 状态码，0-成功，非0-失败 |
| message | string | 响应信息 |
| data | Object | 新创建的习惯数据 |
| data.id | string | 习惯ID |
| data.name | string | 习惯名称 |
| data.userId | string | 用户ID |
| data.type | string | 习惯类型 |
| data.icon | string | 习惯图标 |
| data.startDate | string | 开始日期 |
| data.endDate | string | 结束日期 |
| data.status | number | 初始状态（0-未完成） |
| data.createTime | string | 创建时间，格式为YYYY-MM-DD HH:mm:ss |